(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0b7bec80"],{5210:function(t,e,a){},"76db":function(t,e,a){"use strict";a.r(e);var c=a("7a23");const s={class:"container-fluid"},n={class:"row mt-4"},i={class:"col-md table-responsive"},o={class:"text-end"},l={class:"table align-middle table-hover"},d=Object(c["h"])("thead",null,[Object(c["h"])("tr",{class:"tabletr"},[Object(c["h"])("th",null,"圖片"),Object(c["h"])("th",null,"商品名稱"),Object(c["h"])("th",null,"價格"),Object(c["h"])("th")])],-1),b={style:{width:"200px"}},h={href:"#",class:"text-dark"},r={class:"h6"},p={class:"h5"},u={class:"btn-group btn-group-sm"},g=["onClick"],j=["onClick","disabled"],O={key:0,class:"spinner-grow text-danger spinner-grow-sm",role:"status"},m=Object(c["h"])("span",{class:"visually-hidden"},"Loading...",-1),v=[m];function y(t,e,a,m,y,x){const f=Object(c["C"])("Pagination"),w=Object(c["C"])("shoppingcartModel"),k=Object(c["C"])("Loading");return Object(c["v"])(),Object(c["g"])(c["a"],null,[Object(c["h"])("div",s,[Object(c["h"])("div",n,[Object(c["h"])("div",i,[Object(c["h"])("div",o,[Object(c["h"])("button",{class:"btn btn-primary",type:"button",onClick:e[0]||(e[0]=Object(c["N"])(t=>x.OpenCartModel(),["prevent"]))}," 購物車清單 ")]),Object(c["h"])("table",l,[d,Object(c["h"])("tbody",null,[(Object(c["v"])(!0),Object(c["g"])(c["a"],null,Object(c["A"])(y.productsdata,t=>(Object(c["v"])(),Object(c["g"])("tr",{key:t.id,class:"tabletr"},[Object(c["h"])("td",b,[Object(c["h"])("div",{style:Object(c["q"])([{height:"100px","background-size":"cover","background-position":"center"},{backgroundImage:`url(${t.imagesUrl})`}])},null,4)]),Object(c["h"])("td",null,[Object(c["h"])("a",h,Object(c["F"])(t.title),1)]),Object(c["h"])("td",null,[Object(c["h"])("del",r,"原價 "+Object(c["F"])(t.origin_price)+"元",1),Object(c["h"])("div",p,"現在只要 "+Object(c["F"])(t.price)+"元",1)]),Object(c["h"])("td",null,[Object(c["h"])("div",u,[Object(c["h"])("button",{type:"button",class:"btn btn-outline-secondary",onClick:Object(c["N"])(e=>x.getproduct(t.id),["prevent"])}," 查看更多 ",8,g),Object(c["h"])("button",{type:"button",class:"btn btn-outline-danger",onClick:Object(c["N"])(e=>x.attcart(t.id),["prevent"]),disabled:this.status.loadingItem===t.id,style:{"align-items":"center",display:"flex"}},[this.status.loadingItem===t.id?(Object(c["v"])(),Object(c["g"])("div",O,v)):Object(c["f"])("",!0),Object(c["i"])(" 加到購物車 ")],8,j)])])]))),128))])])])])]),Object(c["j"])(f,{pages:y.pagination,onUpdataPage:x.getproducts},null,8,["pages","onUpdataPage"]),Object(c["j"])(w,{ref:"shoppingcartModel",shoppingcart:y.cartdata},null,8,["shoppingcart"]),Object(c["j"])(k,{active:y.isLoading},null,8,["active"])],64)}a("14d9");var x=a("1799");const f={class:"modal fade",id:"exampleModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true",ref:"modal"},w={class:"modal-dialog modal-dialog-centered modal-lg"},k={class:"modal-content"},C=Object(c["h"])("div",{class:"modal-header bg-primary"},[Object(c["h"])("h5",{class:"modal-title text-light",id:"exampleModalLabel"},"刪除產品"),Object(c["h"])("button",{type:"button",class:"btn-close btn-close-white","data-bs-dismiss":"modal","aria-label":"Close"})],-1),L={class:"modal-body"},I={class:"container-fluid"},M={class:"row mt-4"},$={class:"col"},F={class:"sticky-top"},z={class:"table align-middle"},q=Object(c["h"])("thead",null,[Object(c["h"])("tr",null,[Object(c["h"])("th"),Object(c["h"])("th",null,"品名"),Object(c["h"])("th",{style:{"text-align":"center"}},"數量"),Object(c["h"])("th",{style:{"text-align":"end","padding-right":"25px"}},"單價")])],-1),N={class:"tabletrmodel"},P=["onClick"],U=Object(c["h"])("i",{class:"bi bi-trash3"},null,-1),_=[U],A={class:"input-group input-group-sm"},J=["onUpdate:modelValue","onChange","disabled"],V={class:"input-group-text"},B={class:"text-end"},D=Object(c["h"])("td",{colspan:"3",class:"text-end"},"總計",-1),E={class:"text-end"},G=Object(c["h"])("td",{colspan:"3",class:"text-end text-success"},"折扣價",-1),H={class:"text-end text-success"},K=Object(c["h"])("div",{class:"input-group mb-3 input-group-sm"},[Object(c["h"])("input",{type:"text",class:"form-control",placeholder:"請輸入優惠碼"}),Object(c["h"])("div",{class:"input-group-append"},[Object(c["h"])("button",{class:"btn btn-outline-secondary",type:"button"}," 套用優惠碼 ")])],-1),Q={class:"modal-footer"},R=Object(c["h"])("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"取消",-1);function S(t,e,a,s,n,i){const o=Object(c["C"])("Loading");return Object(c["v"])(),Object(c["g"])(c["a"],null,[Object(c["h"])("div",f,[Object(c["h"])("div",w,[Object(c["h"])("div",k,[C,Object(c["h"])("div",L,[Object(c["h"])("div",I,[Object(c["h"])("div",M,[Object(c["h"])("div",$,[Object(c["h"])("div",F,[Object(c["h"])("table",z,[q,(Object(c["v"])(!0),Object(c["g"])(c["a"],null,Object(c["A"])(this.shoppingcartdata.carts,t=>(Object(c["v"])(),Object(c["g"])("tbody",{key:t.id},[Object(c["h"])("tr",N,[Object(c["h"])("td",null,[Object(c["h"])("button",{type:"button",class:"btn btn-outline-danger btn-sm",onClick:Object(c["N"])(e=>i.delonecart(t.id),["prevent"])},_,8,P)]),Object(c["h"])("td",null,Object(c["F"])(t.product.title)+" ",1),Object(c["h"])("td",null,[Object(c["h"])("div",A,[Object(c["M"])(Object(c["h"])("input",{type:"number",class:"form-control",style:{"text-align":"center"},"onUpdate:modelValue":e=>t.qty=e,min:"1",onChange:e=>i.updataCart(t),disabled:t.id===n.status.loadingItem},null,40,J),[[c["I"],t.qty,void 0,{number:!0}]]),Object(c["h"])("div",V,Object(c["F"])(t.product.unit),1)])]),Object(c["h"])("td",B,Object(c["F"])(t.product.price)+" ",1)])]))),128)),Object(c["h"])("tfoot",null,[Object(c["h"])("tr",null,[D,Object(c["h"])("td",E,Object(c["F"])(this.shoppingcartdata.total),1)]),Object(c["h"])("tr",null,[G,Object(c["h"])("td",H,Object(c["F"])(this.shoppingcartdata.final_total),1)])])]),K])])])])]),Object(c["h"])("div",Q,[R,Object(c["h"])("button",{type:"button",class:"btn btn-primary",onClick:e[0]||(e[0]=Object(c["N"])(e=>t.$emit("del-product",t.tempProduct.id),["prevent"]))},"確定")])])])],512),Object(c["j"])(o,{active:n.isLoading},null,8,["active"])],64)}var T=a("075e"),W={props:{shoppingcart:{type:Object,defaule(){return{}}}},watch:{shoppingcart(){this.shoppingcartdata=this.shoppingcart}},data(){return{modal:{},shoppingcartdata:{},isLoading:!1,status:{loadingItem:""}}},methods:{delonecart(t){this.isLoading=!0;const e="https://vue3-course-api.hexschool.io/api/wuzong-api/cart/"+t;this.$http.delete(e).then(t=>{t.data.success&&(this.getcardata(),this.isLoading=!1)})},getcardata(){const t="https://vue3-course-api.hexschool.io/api/wuzong-api/cart";this.$http.get(t).then(t=>{t.data.success&&(this.shoppingcartdata=t.data.data)})},updataCart(t){this.isLoading=!0,this.status.loadingItem=t.id;const e="https://vue3-course-api.hexschool.io/api/wuzong-api/cart/"+t.id,a={product_id:t.product_id,qty:t.qty};this.$http.put(e,{data:a}).then(t=>{console.log(t),t.data.success&&(this.getcardata(),this.isLoading=!1,this.status.loadingItem="")})}},mixins:[T["a"]]},X=(a("bcb9"),a("6b0d")),Y=a.n(X);const Z=Y()(W,[["render",S]]);var tt=Z,et={data(){return{productsdata:[],pagination:{},isLoading:!1,status:{loadingItem:""},cartdata:{}}},components:{Pagination:x["a"],shoppingcartModel:tt},methods:{getproducts(t){this.isLoading=!0;const e="https://vue3-course-api.hexschool.io/api/wuzong-api/products?page="+t;this.$http.get(e).then(t=>{console.log(t),t.data.success&&(this.isLoading=!1,this.productsdata=t.data.products,this.pagination=t.data.pagination)})},getproduct(t){this.$router.push("/user/product/"+t)},attcart(t){const e={product_id:t,qty:1};this.status.loadingItem=t;const a="https://vue3-course-api.hexschool.io/api/wuzong-api/cart";this.$http.post(a,{data:e}).then(t=>{console.log(t),t.data.success&&(this.status.loadingItem="",console.log(t))})},OpenCartModel(){this.isLoading=!0;const t=this.$refs.shoppingcartModel,e="https://vue3-course-api.hexschool.io/api/wuzong-api/cart";this.$http.get(e).then(e=>{console.log(e),e.data.success&&(this.cartdata=e.data.data,this.isLoading=!1,t.showModel())})}},created(){this.getproducts()}};a("c3f8");const at=Y()(et,[["render",y]]);e["default"]=at},"8e7c":function(t,e,a){},bcb9:function(t,e,a){"use strict";a("8e7c")},c3f8:function(t,e,a){"use strict";a("5210")}}]);
//# sourceMappingURL=chunk-0b7bec80.8055f892.js.map