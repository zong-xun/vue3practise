(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5d61e8fa"],{"28da":function(t,e,a){"use strict";a("ad7b")},"76db":function(t,e,a){"use strict";a.r(e);var s=a("7a23");const c={class:"container-fluid"},l={class:"row mt-4"},o={class:"col-md table-responsive"},d={class:"text-end"},r=Object(s["h"])("i",{class:"bi bi-cart4"},null,-1),i=[r],n={class:"table align-middle table-hover"},b=Object(s["h"])("thead",null,[Object(s["h"])("tr",{class:"tabletr"},[Object(s["h"])("th",null,"圖片"),Object(s["h"])("th",null,"商品名稱"),Object(s["h"])("th",null,"價格"),Object(s["h"])("th")])],-1),h={style:{width:"200px"}},u={href:"#",class:"text-dark"},O={class:"h6"},p={class:"h5"},j={class:"btn-group btn-group-sm"},m=["onClick"],g=["onClick","disabled"],y={key:0,class:"spinner-grow text-danger spinner-grow-sm",role:"status"},f=Object(s["h"])("span",{class:"visually-hidden"},"Loading...",-1),v=[f],k=Object(s["h"])("i",{class:"bi bi-cart-plus"},null,-1);function x(t,e,a,r,f,x){const M=Object(s["F"])("Pagination"),C=Object(s["F"])("shoppingcartModel"),w=Object(s["F"])("userOrderModal"),I=Object(s["F"])("checkoutModal"),$=Object(s["F"])("Loading");return Object(s["y"])(),Object(s["g"])(s["a"],null,[Object(s["h"])("div",c,[Object(s["h"])("div",l,[Object(s["h"])("div",o,[Object(s["h"])("div",d,[Object(s["h"])("button",{class:"btn btn-primary",type:"button",onClick:e[0]||(e[0]=Object(s["T"])(t=>x.OpenCartModel(),["prevent"])),style:{"font-size":"29px",padding:"0.1rem 0.6rem"}},i)]),Object(s["h"])("table",n,[b,Object(s["h"])("tbody",null,[(Object(s["y"])(!0),Object(s["g"])(s["a"],null,Object(s["D"])(f.productsdata,e=>(Object(s["y"])(),Object(s["g"])("tr",{key:e.id,class:"tabletr"},[Object(s["h"])("td",h,[Object(s["h"])("div",{style:Object(s["s"])([{height:"100px","background-size":"cover","background-position":"center"},{backgroundImage:`url(${e.imagesUrl})`}])},null,4)]),Object(s["h"])("td",null,[Object(s["h"])("a",u,Object(s["I"])(e.title),1)]),Object(s["h"])("td",null,[Object(s["h"])("del",O,"原價 "+Object(s["I"])(t.$filters.currency(e.origin_price))+"元",1),Object(s["h"])("div",p,"現在只要 "+Object(s["I"])(t.$filters.currency(e.price))+"元",1)]),Object(s["h"])("td",null,[Object(s["h"])("div",j,[Object(s["h"])("button",{type:"button",class:"btn btn-outline-secondary",onClick:Object(s["T"])(t=>x.getproduct(e.id),["prevent"]),style:{"border-top-right-radius":"0.25rem","border-bottom-right-radius":"0.25rem"}}," 查看更多 ",8,m),Object(s["h"])("button",{type:"button",class:"btn btn-outline-danger",onClick:Object(s["T"])(t=>x.attcart(e.id),["prevent"]),disabled:this.status.loadingItem===e.id,style:{"align-items":"center",display:"flex","justify-content":"center","border-top-left-radius":"0.25rem","border-bottom-left-radius":"0.25rem"}},[this.status.loadingItem===e.id?(Object(s["y"])(),Object(s["g"])("div",y,v)):Object(s["f"])("",!0),k],8,g)])])]))),128))])])])])]),Object(s["j"])(M,{pages:f.pagination,onUpdataPage:x.getproducts},null,8,["pages","onUpdataPage"]),Object(s["j"])(C,{ref:"shoppingcartModel",shoppingcart:f.cartdata,onCartProduct:x.closeCartModel},null,8,["shoppingcart","onCartProduct"]),Object(s["j"])(w,{ref:"userOrderModal",onUserOrderPrevious:x.OpenCartModel,onUserOrderCheckout:x.closeUserOrderModal},null,8,["onUserOrderPrevious","onUserOrderCheckout"]),Object(s["j"])(I,{ref:"checkoutModal",onCheckoutPrevious:x.OpenUserOrderModal,checkoutdata:f.checkoutdata},null,8,["onCheckoutPrevious","checkoutdata"]),Object(s["j"])($,{active:f.isLoading},null,8,["active"])],64)}a("14d9");var M=a("1799"),C=a("ec63");const w={class:"modal fade",id:"exampleModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true",ref:"modal","data-bs-backdrop":"static"},I={class:"modal-dialog modal-dialog-centered modal-lg"},$={class:"modal-content"},L=Object(s["h"])("div",{class:"modal-header bg-primary"},[Object(s["h"])("h5",{class:"modal-title text-light",id:"exampleModalLabel"},"訂購資訊"),Object(s["h"])("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),U={class:"modal-body"},_={class:"modal-body"},V={class:"container-fluid"},P={class:"mb-3"},z=Object(s["h"])("label",{for:"email",class:"form-label"},"Email",-1),F={class:"mb-3"},q=Object(s["h"])("label",{for:"name",class:"form-label"},"收件人姓名",-1),T={class:"mb-3"},S=Object(s["h"])("label",{for:"tel",class:"form-label"},"收件人電話",-1),E={class:"mb-3"},D=Object(s["h"])("label",{for:"address",class:"form-label"},"收件人地址",-1),J={class:"mb-3"},R=Object(s["h"])("label",{for:"message",class:"form-label"},"留言",-1),A={class:"text-end modal-footer",style:{"padding-bottom":"0"}},B={key:1,class:"btn btn-primary"};function G(t,e,a,c,l,o){const d=Object(s["F"])("Field"),r=Object(s["F"])("ErrorMessage"),i=Object(s["F"])("Form");return Object(s["y"])(),Object(s["g"])("div",w,[Object(s["h"])("div",I,[Object(s["h"])("div",$,[L,Object(s["h"])("div",U,[Object(s["h"])("div",_,[Object(s["h"])("div",V,[Object(s["h"])("div",null,[Object(s["j"])(i,{class:"col",onSubmit:o.createOrder},{default:Object(s["R"])(({errors:a})=>[Object(s["h"])("div",P,[z,Object(s["j"])(d,{id:"email",name:"email",type:"email",class:Object(s["r"])(["form-control",{"is-invalid":a["email"]}]),placeholder:"請輸入 Email",rules:"email|required",modelValue:l.form.user.email,"onUpdate:modelValue":e[0]||(e[0]=t=>l.form.user.email=t)},null,8,["class","modelValue"]),Object(s["j"])(r,{name:"email",class:"invalid-feedback"})]),Object(s["h"])("div",F,[q,Object(s["j"])(d,{id:"name",name:"姓名",type:"text",class:Object(s["r"])(["form-control",{"is-invalid":a["姓名"]}]),placeholder:"請輸入姓名",rules:"required",modelValue:l.form.user.name,"onUpdate:modelValue":e[1]||(e[1]=t=>l.form.user.name=t)},null,8,["class","modelValue"]),Object(s["j"])(r,{name:"姓名",class:"invalid-feedback"})]),Object(s["h"])("div",T,[S,Object(s["j"])(d,{id:"tel",name:"電話",type:"tel",class:Object(s["r"])(["form-control",{"is-invalid":a["電話"]}]),placeholder:"請輸入電話",rules:"required",modelValue:l.form.user.tel,"onUpdate:modelValue":e[2]||(e[2]=t=>l.form.user.tel=t)},null,8,["class","modelValue"]),Object(s["j"])(r,{name:"電話",class:"invalid-feedback"})]),Object(s["h"])("div",E,[D,Object(s["j"])(d,{id:"address",name:"地址",type:"text",class:Object(s["r"])(["form-control",{"is-invalid":a["地址"]}]),placeholder:"請輸入地址",rules:"required",modelValue:l.form.user.address,"onUpdate:modelValue":e[3]||(e[3]=t=>l.form.user.address=t)},null,8,["class","modelValue"]),Object(s["j"])(r,{name:"地址",class:"invalid-feedback"})]),Object(s["h"])("div",J,[R,Object(s["S"])(Object(s["h"])("textarea",{name:"",id:"message",class:"form-control",cols:"30",rows:"10","onUpdate:modelValue":e[4]||(e[4]=t=>l.form.message=t)},null,512),[[s["M"],l.form.message]])]),Object(s["h"])("div",A,[Object(s["h"])("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal",onClick:e[5]||(e[5]=Object(s["T"])(e=>t.$emit("User-Order-Previous"),["prevent"]))},"上一步"),""!==l.form.user.address||""!==l.form.user.email||""!==l.form.user.name||""!==l.form.user.tel?(Object(s["y"])(),Object(s["g"])("button",{key:0,class:"btn btn-primary",onClick:e[6]||(e[6]=Object(s["T"])(e=>t.$emit("User-Order-checkout",l.form),["prevent"]))},"送出訂單")):(Object(s["y"])(),Object(s["g"])("button",B,"送出訂單"))])]),_:1},8,["onSubmit"])])])])])])])],512)}var H=a("075e"),K={props:{userorder:{type:Object,defaule(){return{}}}},watch:{},data(){return{form:{user:{name:"",email:"",tel:"",address:""},message:""}}},methods:{createOrder(){}},emits:["User-Order-Previous","User-Order-checkout"],mixins:[H["a"]]},N=a("6b0d"),Q=a.n(N);const W=Q()(K,[["render",G]]);var X=W;const Y={class:"modal fade",id:"exampleModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true",ref:"modal","data-bs-backdrop":"static"},Z={class:"modal-dialog modal-dialog-centered modal-lg"},tt={class:"modal-content"},et=Object(s["h"])("div",{class:"modal-header bg-primary"},[Object(s["h"])("h5",{class:"modal-title text-light",id:"exampleModalLabel"},"結帳"),Object(s["h"])("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),at={class:"modal-body"},st={class:"modal-body"},ct={class:"container-fluid"},lt={class:"row mt-4"},ot={class:"table align-middle"},dt=Object(s["h"])("thead",null,[Object(s["h"])("th",null,"品名"),Object(s["h"])("th",null,"數量"),Object(s["h"])("th",{style:{"text-align":"center"}},"單價")],-1),rt={class:"text-end"},it=Object(s["h"])("td",{colspan:"2",class:"text-end"},"總計",-1),nt={class:"text-end"},bt={class:"table"},ht=Object(s["h"])("th",{width:"100"},"Email",-1),ut=Object(s["h"])("th",null,"姓名",-1),Ot=Object(s["h"])("th",null,"收件人電話",-1),pt=Object(s["h"])("th",null,"收件人地址",-1),jt=Object(s["h"])("th",null,"付款狀態",-1),mt={key:0},gt={key:1,class:"text-success"},yt={key:0,class:"text-end"},ft=Object(s["h"])("button",{class:"btn btn-danger"},"確認付款去",-1),vt=[ft],kt={class:"modal-footer"},xt=Object(s["h"])("button",{type:"button",class:"btn btn-primary"},"確定",-1);function Mt(t,e,a,c,l,o){return Object(s["y"])(),Object(s["g"])("div",Y,[Object(s["h"])("div",Z,[Object(s["h"])("div",tt,[et,Object(s["h"])("div",at,[Object(s["h"])("div",st,[Object(s["h"])("div",ct,[Object(s["h"])("div",lt,[Object(s["h"])("div",null,[Object(s["h"])("form",{class:"col",onSubmit:e[0]||(e[0]=Object(s["T"])((...e)=>t.payOrder&&t.payOrder(...e),["prevent"]))},[Object(s["h"])("table",ot,[dt,Object(s["h"])("tbody",null,[(Object(s["y"])(!0),Object(s["g"])(s["a"],null,Object(s["D"])(l.orderarr,(t,e)=>(Object(s["y"])(),Object(s["g"])("tr",{key:e},[Object(s["h"])("td",null,Object(s["I"])(t.product.title),1),Object(s["h"])("td",null,Object(s["I"])(t.qty)+"/"+Object(s["I"])(t.product.unit),1),Object(s["h"])("td",rt,Object(s["I"])(t.final_total),1)]))),128))]),Object(s["h"])("tfoot",null,[Object(s["h"])("tr",null,[it,Object(s["h"])("td",nt,Object(s["I"])(this.checkoutdata.total),1)])])]),Object(s["h"])("table",bt,[Object(s["h"])("tbody",null,[Object(s["h"])("tr",null,[ht,Object(s["h"])("td",null,Object(s["I"])(l.user.email),1)]),Object(s["h"])("tr",null,[ut,Object(s["h"])("td",null,Object(s["I"])(l.user.name),1)]),Object(s["h"])("tr",null,[Ot,Object(s["h"])("td",null,Object(s["I"])(l.user.tel),1)]),Object(s["h"])("tr",null,[pt,Object(s["h"])("td",null,Object(s["I"])(l.user.address),1)]),Object(s["h"])("tr",null,[jt,Object(s["h"])("td",null,[l.order.is_paid?(Object(s["y"])(),Object(s["g"])("span",gt,"付款完成")):(Object(s["y"])(),Object(s["g"])("span",mt,"尚未付款"))])])])]),!1===l.order.is_paid?(Object(s["y"])(),Object(s["g"])("div",yt,vt)):Object(s["f"])("",!0)],32)])])])])]),Object(s["h"])("div",kt,[Object(s["h"])("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal",onClick:e[1]||(e[1]=Object(s["T"])(e=>t.$emit("checkout-Previous"),["prevent"]))},"上一步"),xt])])])],512)}var Ct={props:{checkoutdata:{type:Object,defaule(){return{}}}},watch:{checkoutdata(){this.user=this.checkoutdata.user,this.orderr=this.checkoutdata.products,this.orderarr=Object.values(this.orderr),console.log(Object.values(this.orderr))}},data(){return{order:{user:{}},orderr:{},orderarr:[],user:{}}},methods:{},emits:["checkout-Previous"],mixins:[H["a"]]};const wt=Q()(Ct,[["render",Mt]]);var It=wt,$t={data(){return{productsdata:[],pagination:{},isLoading:!1,status:{loadingItem:""},cartdata:{},checkoutdata:{}}},components:{Pagination:M["a"],shoppingcartModel:C["a"],checkoutModal:It,userOrderModal:X},methods:{getproducts(t){this.isLoading=!0;const e="https://vue3-course-api.hexschool.io/api/wuzong-api/products?page="+t;this.$http.get(e).then(t=>{console.log(t),t.data.success&&(this.isLoading=!1,this.productsdata=t.data.products,this.pagination=t.data.pagination)})},getproduct(t){this.$router.push("/user/product/"+t)},attcart(t){const e={product_id:t,qty:1};this.status.loadingItem=t;const a="https://vue3-course-api.hexschool.io/api/wuzong-api/cart";this.$http.post(a,{data:e}).then(t=>{t.data.success&&(this.status.loadingItem="",console.log(t))})},OpenCartModel(){this.isLoading=!0;const t=this.$refs.shoppingcartModel,e="https://vue3-course-api.hexschool.io/api/wuzong-api/cart";this.$http.get(e).then(e=>{console.log(e),e.data.success&&(this.cartdata=e.data.data,this.isLoading=!1,t.showModel())})},closeCartModel(){const t=this.$refs.shoppingcartModel;t.hideModel(),this.OpenUserOrderModal()},OpenUserOrderModal(){const t=this.$refs.userOrderModal;t.showModel()},closeUserOrderModal(t){if(this.isLoading=!0,""!==t.user.address&&""!==t.user.email&&""!==t.user.name&&""!==t.user.tel){const e=this.$refs.userOrderModal,a="https://vue3-course-api.hexschool.io/api/wuzong-api/order";this.$http.post(a,{data:t}).then(t=>{t.data.success&&(console.log(t),this.isLoading=!1,e.hideModel(),this.OpencheckoutModal(t.data.orderId))})}},OpencheckoutModal(t){this.isLoading=!0;const e=this.$refs.checkoutModal;e.showModel();const a="https://vue3-course-api.hexschool.io/api/wuzong-api/order/"+t;this.$http.get(a).then(t=>{t.data.success&&(console.log(t),this.checkoutdata=t.data.order,this.isLoading=!1)})}},created(){this.getproducts()}};a("28da");const Lt=Q()($t,[["render",x]]);e["default"]=Lt},"7ca9":function(t,e,a){},ad7b:function(t,e,a){},b264:function(t,e,a){"use strict";a("7ca9")},ec63:function(t,e,a){"use strict";var s=a("7a23");const c={class:"modal fade",id:"exampleModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true",ref:"modal","data-bs-backdrop":"static"},l={class:"modal-dialog modal-dialog-centered modal-lg"},o={class:"modal-content"},d=Object(s["h"])("div",{class:"modal-header bg-primary"},[Object(s["h"])("h5",{class:"modal-title text-light",id:"exampleModalLabel"},"購物清單"),Object(s["h"])("button",{type:"button",class:"btn-close btn-close-white","data-bs-dismiss":"modal","aria-label":"Close"})],-1),r={class:"modal-body"},i={class:"container-fluid"},n={class:"row mt-4"},b={class:"col"},h={class:"sticky-top"},u={class:"table align-middle"},O=Object(s["h"])("thead",null,[Object(s["h"])("tr",null,[Object(s["h"])("th"),Object(s["h"])("th",null,"品名"),Object(s["h"])("th",{style:{"text-align":"center"}},"數量"),Object(s["h"])("th",{style:{"text-align":"end","padding-right":"25px"}},"單價")])],-1),p={class:"tabletrmodel"},j=["onClick"],m=Object(s["h"])("i",{class:"bi bi-trash3"},null,-1),g=[m],y={key:0,class:"text-success"},f={class:"input-group input-group-sm"},v=["onUpdate:modelValue","onChange","disabled"],k={class:"input-group-text"},x={class:"text-end"},M={key:0},C={key:1,class:"text-success"},w=Object(s["h"])("td",{colspan:"3",class:"text-end"},"總計",-1),I={class:"text-end"},$={key:0},L=Object(s["h"])("td",{colspan:"3",class:"text-end text-success"},"折扣後總計",-1),U={class:"text-end text-success"},_={class:"input-group mb-3 input-group-sm"},V={class:"input-group-append"},P={class:"modal-footer"},z=Object(s["h"])("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"取消",-1);function F(t,e,a,m,F,q){const T=Object(s["F"])("Loading");return Object(s["y"])(),Object(s["g"])(s["a"],null,[Object(s["h"])("div",c,[Object(s["h"])("div",l,[Object(s["h"])("div",o,[d,Object(s["h"])("div",r,[Object(s["h"])("div",i,[Object(s["h"])("div",n,[Object(s["h"])("div",b,[Object(s["h"])("div",h,[Object(s["h"])("table",u,[O,(Object(s["y"])(!0),Object(s["g"])(s["a"],null,Object(s["D"])(this.shoppingcartdata.carts,e=>(Object(s["y"])(),Object(s["g"])("tbody",{key:e.id},[Object(s["h"])("tr",p,[Object(s["h"])("td",null,[Object(s["h"])("button",{type:"button",class:"btn btn-outline-danger btn-sm",onClick:Object(s["T"])(t=>q.delonecart(e.id),["prevent"])},g,8,j)]),Object(s["h"])("td",null,[Object(s["i"])(Object(s["I"])(e.product.title)+" ",1),this.shoppingcartdata.final_total!==this.shoppingcartdata.total?(Object(s["y"])(),Object(s["g"])("div",y," 已套用優惠券 ")):Object(s["f"])("",!0)]),Object(s["h"])("td",null,[Object(s["h"])("div",f,[Object(s["S"])(Object(s["h"])("input",{type:"number",class:"form-control",style:{"text-align":"center"},"onUpdate:modelValue":t=>e.qty=t,min:"1",onChange:t=>q.updataCart(e),disabled:e.id===F.status.loadingItem},null,40,v),[[s["M"],e.qty,void 0,{number:!0}]]),Object(s["h"])("div",k,Object(s["I"])(e.product.unit),1)])]),Object(s["h"])("td",x,[this.shoppingcartdata.final_total===this.shoppingcartdata.total?(Object(s["y"])(),Object(s["g"])("span",M,Object(s["I"])(t.$filters.currency(e.final_total)),1)):Object(s["f"])("",!0),this.shoppingcartdata.final_total!==this.shoppingcartdata.total?(Object(s["y"])(),Object(s["g"])("small",C,"折扣價："+Object(s["I"])(t.$filters.currency(e.final_total)),1)):Object(s["f"])("",!0)])])]))),128)),Object(s["h"])("tfoot",null,[Object(s["h"])("tr",null,[w,Object(s["h"])("td",I,Object(s["I"])(t.$filters.currency(this.shoppingcartdata.total)),1)]),this.shoppingcartdata.final_total!==this.shoppingcartdata.total?(Object(s["y"])(),Object(s["g"])("tr",$,[L,Object(s["h"])("td",U,Object(s["I"])(t.$filters.currency(this.shoppingcartdata.final_total)),1)])):Object(s["f"])("",!0)])]),Object(s["h"])("div",_,[Object(s["S"])(Object(s["h"])("input",{type:"text",class:"form-control",placeholder:"請輸入優惠碼","onUpdate:modelValue":e[0]||(e[0]=t=>F.coupon_code=t)},null,512),[[s["M"],F.coupon_code]]),Object(s["h"])("div",V,[Object(s["h"])("button",{class:"btn btn-outline-secondary",type:"button",onClick:e[1]||(e[1]=Object(s["T"])(t=>q.addCouponCode(),["prevent"]))}," 套用優惠碼 ")])])])])])])]),Object(s["h"])("div",P,[z,Object(s["h"])("button",{type:"button",class:"btn btn-primary",onClick:e[2]||(e[2]=Object(s["T"])(e=>t.$emit("cart-product",F.shoppingcartdata),["prevent"]))},"確定")])])])],512),Object(s["j"])(T,{active:F.isLoading},null,8,["active"])],64)}var q=a("075e"),T={props:{shoppingcart:{type:Object,defaule(){return{}}}},watch:{shoppingcart(){this.shoppingcartdata=this.shoppingcart,this.coupon_code=""}},data(){return{modal:{},shoppingcartdata:{},isLoading:!1,status:{loadingItem:""},coupon_code:""}},methods:{delonecart(t){this.isLoading=!0;const e="https://vue3-course-api.hexschool.io/api/wuzong-api/cart/"+t;this.$http.delete(e).then(t=>{t.data.success&&(this.getcardata(),this.isLoading=!1)})},getcardata(){const t="https://vue3-course-api.hexschool.io/api/wuzong-api/cart";this.$http.get(t).then(t=>{t.data.success&&(console.log(t),this.shoppingcartdata=t.data.data)})},updataCart(t){this.isLoading=!0,this.status.loadingItem=t.id;const e="https://vue3-course-api.hexschool.io/api/wuzong-api/cart/"+t.id,a={product_id:t.product_id,qty:t.qty};this.$http.put(e,{data:a}).then(t=>{console.log(t),t.data.success&&(this.getcardata(),this.isLoading=!1,this.status.loadingItem="")})},addCouponCode(){const t="https://vue3-course-api.hexschool.io/api/wuzong-api/coupon",e={data:{code:this.coupon_code}};this.$http.post(t,e).then(t=>{t.data.success&&(console.log(t),this.getcardata())})}},emits:["cart-product"],mixins:[q["a"]]},S=(a("b264"),a("6b0d")),E=a.n(S);const D=E()(T,[["render",F]]);e["a"]=D}}]);
//# sourceMappingURL=chunk-5d61e8fa.0cf6d98e.js.map