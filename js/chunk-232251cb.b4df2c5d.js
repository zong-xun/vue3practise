(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-232251cb"],{5542:function(t,e,a){"use strict";a("da9e")},"76db":function(t,e,a){"use strict";a.r(e);var c=a("7a23");const s={class:"container-fluid"},o={class:"row mt-4"},i={class:"col-md table-responsive"},n={class:"text-end"},l=Object(c["h"])("i",{class:"bi bi-cart4"},null,-1),d=[l],r={class:"table align-middle table-hover"},h=Object(c["h"])("thead",null,[Object(c["h"])("tr",{class:"tabletr"},[Object(c["h"])("th",null,"圖片"),Object(c["h"])("th",null,"商品名稱"),Object(c["h"])("th",null,"價格"),Object(c["h"])("th")])],-1),b={style:{width:"200px"}},p={href:"#",class:"text-dark"},u={class:"h6"},g={class:"h5"},j={class:"btn-group btn-group-sm"},O=["onClick"],m=["onClick","disabled"],v={key:0,class:"spinner-grow text-danger spinner-grow-sm",role:"status"},y=Object(c["h"])("span",{class:"visually-hidden"},"Loading...",-1),f=[y],x=Object(c["h"])("i",{class:"bi bi-cart-plus"},null,-1);function C(t,e,a,l,y,C){const k=Object(c["C"])("Pagination"),w=Object(c["C"])("shoppingcartModel"),$=Object(c["C"])("Loading");return Object(c["v"])(),Object(c["g"])(c["a"],null,[Object(c["h"])("div",s,[Object(c["h"])("div",o,[Object(c["h"])("div",i,[Object(c["h"])("div",n,[Object(c["h"])("button",{class:"btn btn-primary",type:"button",onClick:e[0]||(e[0]=Object(c["N"])(t=>C.OpenCartModel(),["prevent"])),style:{"font-size":"29px",padding:"0.1rem 0.6rem"}},d)]),Object(c["h"])("table",r,[h,Object(c["h"])("tbody",null,[(Object(c["v"])(!0),Object(c["g"])(c["a"],null,Object(c["A"])(y.productsdata,e=>(Object(c["v"])(),Object(c["g"])("tr",{key:e.id,class:"tabletr"},[Object(c["h"])("td",b,[Object(c["h"])("div",{style:Object(c["q"])([{height:"100px","background-size":"cover","background-position":"center"},{backgroundImage:`url(${e.imagesUrl})`}])},null,4)]),Object(c["h"])("td",null,[Object(c["h"])("a",p,Object(c["F"])(e.title),1)]),Object(c["h"])("td",null,[Object(c["h"])("del",u,"原價 "+Object(c["F"])(t.$filters.currency(e.origin_price))+"元",1),Object(c["h"])("div",g,"現在只要 "+Object(c["F"])(t.$filters.currency(e.price))+"元",1)]),Object(c["h"])("td",null,[Object(c["h"])("div",j,[Object(c["h"])("button",{type:"button",class:"btn btn-outline-secondary",onClick:Object(c["N"])(t=>C.getproduct(e.id),["prevent"]),style:{"border-top-right-radius":"0.25rem","border-bottom-right-radius":"0.25rem"}}," 查看更多 ",8,O),Object(c["h"])("button",{type:"button",class:"btn btn-outline-danger",onClick:Object(c["N"])(t=>C.attcart(e.id),["prevent"]),disabled:this.status.loadingItem===e.id,style:{"align-items":"center",display:"flex","justify-content":"center","border-top-left-radius":"0.25rem","border-bottom-left-radius":"0.25rem"}},[this.status.loadingItem===e.id?(Object(c["v"])(),Object(c["g"])("div",v,f)):Object(c["f"])("",!0),x],8,m)])])]))),128))])])])])]),Object(c["j"])(k,{pages:y.pagination,onUpdataPage:C.getproducts},null,8,["pages","onUpdataPage"]),Object(c["j"])(w,{ref:"shoppingcartModel",shoppingcart:y.cartdata,onCartProduct:C.closeCartModel},null,8,["shoppingcart","onCartProduct"]),Object(c["j"])($,{active:y.isLoading},null,8,["active"])],64)}a("14d9");var k=a("1799"),w=a("ec63"),$={data(){return{productsdata:[],pagination:{},isLoading:!1,status:{loadingItem:""},cartdata:{}}},components:{Pagination:k["a"],shoppingcartModel:w["a"]},methods:{getproducts(t){this.isLoading=!0;const e="https://vue3-course-api.hexschool.io/api/wuzong-api/products?page="+t;this.$http.get(e).then(t=>{console.log(t),t.data.success&&(this.isLoading=!1,this.productsdata=t.data.products,this.pagination=t.data.pagination)})},getproduct(t){this.$router.push("/user/product/"+t)},attcart(t){const e={product_id:t,qty:1};this.status.loadingItem=t;const a="https://vue3-course-api.hexschool.io/api/wuzong-api/cart";this.$http.post(a,{data:e}).then(t=>{console.log(t),t.data.success&&(this.status.loadingItem="",console.log(t))})},OpenCartModel(){this.isLoading=!0;const t=this.$refs.shoppingcartModel,e="https://vue3-course-api.hexschool.io/api/wuzong-api/cart";this.$http.get(e).then(e=>{console.log(e),e.data.success&&(this.cartdata=e.data.data,this.isLoading=!1,t.showModel())})},closeCartModel(){const t=this.$refs.shoppingcartModel;t.hideModel()}},created(){this.getproducts()}},L=(a("c425"),a("6b0d")),M=a.n(L);const _=M()($,[["render",C]]);e["default"]=_},c425:function(t,e,a){"use strict";a("fb8e")},da9e:function(t,e,a){},ec63:function(t,e,a){"use strict";var c=a("7a23");const s={class:"modal fade",id:"exampleModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true",ref:"modal"},o={class:"modal-dialog modal-dialog-centered modal-lg"},i={class:"modal-content"},n=Object(c["h"])("div",{class:"modal-header bg-primary"},[Object(c["h"])("h5",{class:"modal-title text-light",id:"exampleModalLabel"},"購物清單"),Object(c["h"])("button",{type:"button",class:"btn-close btn-close-white","data-bs-dismiss":"modal","aria-label":"Close"})],-1),l={class:"modal-body"},d={class:"container-fluid"},r={class:"row mt-4"},h={class:"col"},b={class:"sticky-top"},p={class:"table align-middle"},u=Object(c["h"])("thead",null,[Object(c["h"])("tr",null,[Object(c["h"])("th"),Object(c["h"])("th",null,"品名"),Object(c["h"])("th",{style:{"text-align":"center"}},"數量"),Object(c["h"])("th",{style:{"text-align":"end","padding-right":"25px"}},"單價")])],-1),g={class:"tabletrmodel"},j=["onClick"],O=Object(c["h"])("i",{class:"bi bi-trash3"},null,-1),m=[O],v={key:0,class:"text-success"},y={class:"input-group input-group-sm"},f=["onUpdate:modelValue","onChange","disabled"],x={class:"input-group-text"},C={class:"text-end"},k={key:0},w={key:1,class:"text-success"},$=Object(c["h"])("td",{colspan:"3",class:"text-end"},"總計",-1),L={class:"text-end"},M={key:0},_=Object(c["h"])("td",{colspan:"3",class:"text-end text-success"},"折扣後總計",-1),I={class:"text-end text-success"},z={class:"input-group mb-3 input-group-sm"},F={class:"input-group-append"},q={class:"modal-footer"},N=Object(c["h"])("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"取消",-1);function P(t,e,a,O,P,U){const V=Object(c["C"])("Loading");return Object(c["v"])(),Object(c["g"])(c["a"],null,[Object(c["h"])("div",s,[Object(c["h"])("div",o,[Object(c["h"])("div",i,[n,Object(c["h"])("div",l,[Object(c["h"])("div",d,[Object(c["h"])("div",r,[Object(c["h"])("div",h,[Object(c["h"])("div",b,[Object(c["h"])("table",p,[u,(Object(c["v"])(!0),Object(c["g"])(c["a"],null,Object(c["A"])(this.shoppingcartdata.carts,e=>(Object(c["v"])(),Object(c["g"])("tbody",{key:e.id},[Object(c["h"])("tr",g,[Object(c["h"])("td",null,[Object(c["h"])("button",{type:"button",class:"btn btn-outline-danger btn-sm",onClick:Object(c["N"])(t=>U.delonecart(e.id),["prevent"])},m,8,j)]),Object(c["h"])("td",null,[Object(c["i"])(Object(c["F"])(e.product.title)+" ",1),this.shoppingcartdata.final_total!==this.shoppingcartdata.total?(Object(c["v"])(),Object(c["g"])("div",v," 已套用優惠券 ")):Object(c["f"])("",!0)]),Object(c["h"])("td",null,[Object(c["h"])("div",y,[Object(c["M"])(Object(c["h"])("input",{type:"number",class:"form-control",style:{"text-align":"center"},"onUpdate:modelValue":t=>e.qty=t,min:"1",onChange:t=>U.updataCart(e),disabled:e.id===P.status.loadingItem},null,40,f),[[c["I"],e.qty,void 0,{number:!0}]]),Object(c["h"])("div",x,Object(c["F"])(e.product.unit),1)])]),Object(c["h"])("td",C,[this.shoppingcartdata.final_total===this.shoppingcartdata.total?(Object(c["v"])(),Object(c["g"])("span",k,Object(c["F"])(t.$filters.currency(e.final_total)),1)):Object(c["f"])("",!0),this.shoppingcartdata.final_total!==this.shoppingcartdata.total?(Object(c["v"])(),Object(c["g"])("small",w,"折扣價："+Object(c["F"])(t.$filters.currency(e.final_total)),1)):Object(c["f"])("",!0)])])]))),128)),Object(c["h"])("tfoot",null,[Object(c["h"])("tr",null,[$,Object(c["h"])("td",L,Object(c["F"])(t.$filters.currency(this.shoppingcartdata.total)),1)]),this.shoppingcartdata.final_total!==this.shoppingcartdata.total?(Object(c["v"])(),Object(c["g"])("tr",M,[_,Object(c["h"])("td",I,Object(c["F"])(t.$filters.currency(this.shoppingcartdata.final_total)),1)])):Object(c["f"])("",!0)])]),Object(c["h"])("div",z,[Object(c["M"])(Object(c["h"])("input",{type:"text",class:"form-control",placeholder:"請輸入優惠碼","onUpdate:modelValue":e[0]||(e[0]=t=>P.coupon_code=t)},null,512),[[c["I"],P.coupon_code]]),Object(c["h"])("div",F,[Object(c["h"])("button",{class:"btn btn-outline-secondary",type:"button",onClick:e[1]||(e[1]=Object(c["N"])(t=>U.addCouponCode(),["prevent"]))}," 套用優惠碼 ")])])])])])])]),Object(c["h"])("div",q,[N,Object(c["h"])("button",{type:"button",class:"btn btn-primary",onClick:e[2]||(e[2]=Object(c["N"])(e=>t.$emit("cart-product",P.shoppingcartdata),["prevent"]))},"確定")])])])],512),Object(c["j"])(V,{active:P.isLoading},null,8,["active"])],64)}var U=a("075e"),V={props:{shoppingcart:{type:Object,defaule(){return{}}}},watch:{shoppingcart(){this.shoppingcartdata=this.shoppingcart,this.coupon_code=""}},data(){return{modal:{},shoppingcartdata:{},isLoading:!1,status:{loadingItem:""},coupon_code:""}},methods:{delonecart(t){this.isLoading=!0;const e="https://vue3-course-api.hexschool.io/api/wuzong-api/cart/"+t;this.$http.delete(e).then(t=>{t.data.success&&(this.getcardata(),this.isLoading=!1)})},getcardata(){const t="https://vue3-course-api.hexschool.io/api/wuzong-api/cart";this.$http.get(t).then(t=>{t.data.success&&(console.log(t),this.shoppingcartdata=t.data.data)})},updataCart(t){this.isLoading=!0,this.status.loadingItem=t.id;const e="https://vue3-course-api.hexschool.io/api/wuzong-api/cart/"+t.id,a={product_id:t.product_id,qty:t.qty};this.$http.put(e,{data:a}).then(t=>{console.log(t),t.data.success&&(this.getcardata(),this.isLoading=!1,this.status.loadingItem="")})},addCouponCode(){const t="https://vue3-course-api.hexschool.io/api/wuzong-api/coupon",e={data:{code:this.coupon_code}};this.$http.post(t,e).then(t=>{t.data.success&&(console.log(t),this.getcardata())})}},emits:["cart-product"],mixins:[U["a"]]},A=(a("5542"),a("6b0d")),J=a.n(A);const B=J()(V,[["render",P]]);e["a"]=B},fb8e:function(t,e,a){}}]);
//# sourceMappingURL=chunk-232251cb.b4df2c5d.js.map