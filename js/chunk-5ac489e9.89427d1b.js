(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5ac489e9"],{"5e21":function(t,e,a){},"76db":function(t,e,a){"use strict";a.r(e);var s=a("7a23");const c={class:"container-fluid"},o={class:"row mt-4"},i={class:"col-md table-responsive"},n={class:"text-end"},l=Object(s["h"])("i",{class:"bi bi-cart4"},null,-1),d=[l],r={class:"table align-middle table-hover"},b=Object(s["h"])("thead",null,[Object(s["h"])("tr",{class:"tabletr"},[Object(s["h"])("th",null,"圖片"),Object(s["h"])("th",null,"商品名稱"),Object(s["h"])("th",null,"價格"),Object(s["h"])("th")])],-1),h={style:{width:"200px"}},p={href:"#",class:"text-dark"},u={class:"h6"},g={class:"h5"},j={class:"btn-group btn-group-sm"},O=["onClick"],m=["onClick","disabled"],v={key:0,class:"spinner-grow text-danger spinner-grow-sm",role:"status"},y=Object(s["h"])("span",{class:"visually-hidden"},"Loading...",-1),x=[y],f=Object(s["h"])("i",{class:"bi bi-cart-plus"},null,-1);function C(t,e,a,l,y,C){const w=Object(s["C"])("Pagination"),k=Object(s["C"])("shoppingcartModel"),L=Object(s["C"])("Loading");return Object(s["v"])(),Object(s["g"])(s["a"],null,[Object(s["h"])("div",c,[Object(s["h"])("div",o,[Object(s["h"])("div",i,[Object(s["h"])("div",n,[Object(s["h"])("button",{class:"btn btn-primary",type:"button",onClick:e[0]||(e[0]=Object(s["N"])(t=>C.OpenCartModel(),["prevent"])),style:{"font-size":"29px",padding:"0.1rem 0.6rem"}},d)]),Object(s["h"])("table",r,[b,Object(s["h"])("tbody",null,[(Object(s["v"])(!0),Object(s["g"])(s["a"],null,Object(s["A"])(y.productsdata,t=>(Object(s["v"])(),Object(s["g"])("tr",{key:t.id,class:"tabletr"},[Object(s["h"])("td",h,[Object(s["h"])("div",{style:Object(s["q"])([{height:"100px","background-size":"cover","background-position":"center"},{backgroundImage:`url(${t.imagesUrl})`}])},null,4)]),Object(s["h"])("td",null,[Object(s["h"])("a",p,Object(s["F"])(t.title),1)]),Object(s["h"])("td",null,[Object(s["h"])("del",u,"原價 "+Object(s["F"])(t.origin_price)+"元",1),Object(s["h"])("div",g,"現在只要 "+Object(s["F"])(t.price)+"元",1)]),Object(s["h"])("td",null,[Object(s["h"])("div",j,[Object(s["h"])("button",{type:"button",class:"btn btn-outline-secondary",onClick:Object(s["N"])(e=>C.getproduct(t.id),["prevent"]),style:{"border-top-right-radius":"0.25rem","border-bottom-right-radius":"0.25rem"}}," 查看更多 ",8,O),Object(s["h"])("button",{type:"button",class:"btn btn-outline-danger",onClick:Object(s["N"])(e=>C.attcart(t.id),["prevent"]),disabled:this.status.loadingItem===t.id,style:{"align-items":"center",display:"flex","justify-content":"center","border-top-left-radius":"0.25rem","border-bottom-left-radius":"0.25rem"}},[this.status.loadingItem===t.id?(Object(s["v"])(),Object(s["g"])("div",v,x)):Object(s["f"])("",!0),f],8,m)])])]))),128))])])])])]),Object(s["j"])(w,{pages:y.pagination,onUpdataPage:C.getproducts},null,8,["pages","onUpdataPage"]),Object(s["j"])(k,{ref:"shoppingcartModel",shoppingcart:y.cartdata,onCartProduct:C.closeCartModel},null,8,["shoppingcart","onCartProduct"]),Object(s["j"])(L,{active:y.isLoading},null,8,["active"])],64)}a("14d9");var w=a("1799");const k={class:"modal fade",id:"exampleModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true",ref:"modal"},L={class:"modal-dialog modal-dialog-centered modal-lg"},M={class:"modal-content"},I=Object(s["h"])("div",{class:"modal-header bg-primary"},[Object(s["h"])("h5",{class:"modal-title text-light",id:"exampleModalLabel"},"購物清單"),Object(s["h"])("button",{type:"button",class:"btn-close btn-close-white","data-bs-dismiss":"modal","aria-label":"Close"})],-1),$={class:"modal-body"},z={class:"container-fluid"},F={class:"row mt-4"},q={class:"col"},P={class:"sticky-top"},N={class:"table align-middle"},U=Object(s["h"])("thead",null,[Object(s["h"])("tr",null,[Object(s["h"])("th"),Object(s["h"])("th",null,"品名"),Object(s["h"])("th",{style:{"text-align":"center"}},"數量"),Object(s["h"])("th",{style:{"text-align":"end","padding-right":"25px"}},"單價")])],-1),_={class:"tabletrmodel"},A=["onClick"],J=Object(s["h"])("i",{class:"bi bi-trash3"},null,-1),V=[J],B={class:"input-group input-group-sm"},D=["onUpdate:modelValue","onChange","disabled"],E={class:"input-group-text"},G={class:"text-end"},H=Object(s["h"])("td",{colspan:"3",class:"text-end"},"總計",-1),K={class:"text-end"},Q=Object(s["h"])("td",{colspan:"3",class:"text-end text-success"},"折扣價",-1),R={class:"text-end text-success"},S=Object(s["h"])("div",{class:"input-group mb-3 input-group-sm"},[Object(s["h"])("input",{type:"text",class:"form-control",placeholder:"請輸入優惠碼"}),Object(s["h"])("div",{class:"input-group-append"},[Object(s["h"])("button",{class:"btn btn-outline-secondary",type:"button"}," 套用優惠碼 ")])],-1),T={class:"modal-footer"},W=Object(s["h"])("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"取消",-1);function X(t,e,a,c,o,i){const n=Object(s["C"])("Loading");return Object(s["v"])(),Object(s["g"])(s["a"],null,[Object(s["h"])("div",k,[Object(s["h"])("div",L,[Object(s["h"])("div",M,[I,Object(s["h"])("div",$,[Object(s["h"])("div",z,[Object(s["h"])("div",F,[Object(s["h"])("div",q,[Object(s["h"])("div",P,[Object(s["h"])("table",N,[U,(Object(s["v"])(!0),Object(s["g"])(s["a"],null,Object(s["A"])(this.shoppingcartdata.carts,t=>(Object(s["v"])(),Object(s["g"])("tbody",{key:t.id},[Object(s["h"])("tr",_,[Object(s["h"])("td",null,[Object(s["h"])("button",{type:"button",class:"btn btn-outline-danger btn-sm",onClick:Object(s["N"])(e=>i.delonecart(t.id),["prevent"])},V,8,A)]),Object(s["h"])("td",null,Object(s["F"])(t.product.title)+" ",1),Object(s["h"])("td",null,[Object(s["h"])("div",B,[Object(s["M"])(Object(s["h"])("input",{type:"number",class:"form-control",style:{"text-align":"center"},"onUpdate:modelValue":e=>t.qty=e,min:"1",onChange:e=>i.updataCart(t),disabled:t.id===o.status.loadingItem},null,40,D),[[s["I"],t.qty,void 0,{number:!0}]]),Object(s["h"])("div",E,Object(s["F"])(t.product.unit),1)])]),Object(s["h"])("td",G,Object(s["F"])(t.product.price)+" ",1)])]))),128)),Object(s["h"])("tfoot",null,[Object(s["h"])("tr",null,[H,Object(s["h"])("td",K,Object(s["F"])(this.shoppingcartdata.total),1)]),Object(s["h"])("tr",null,[Q,Object(s["h"])("td",R,Object(s["F"])(this.shoppingcartdata.final_total),1)])])]),S])])])])]),Object(s["h"])("div",T,[W,Object(s["h"])("button",{type:"button",class:"btn btn-primary",onClick:e[0]||(e[0]=Object(s["N"])(e=>t.$emit("cart-product",o.shoppingcartdata),["prevent"]))},"確定")])])])],512),Object(s["j"])(n,{active:o.isLoading},null,8,["active"])],64)}var Y=a("075e"),Z={props:{shoppingcart:{type:Object,defaule(){return{}}}},watch:{shoppingcart(){this.shoppingcartdata=this.shoppingcart}},data(){return{modal:{},shoppingcartdata:{},isLoading:!1,status:{loadingItem:""}}},methods:{delonecart(t){this.isLoading=!0;const e="https://vue3-course-api.hexschool.io/api/wuzong-api/cart/"+t;this.$http.delete(e).then(t=>{t.data.success&&(this.getcardata(),this.isLoading=!1)})},getcardata(){const t="https://vue3-course-api.hexschool.io/api/wuzong-api/cart";this.$http.get(t).then(t=>{t.data.success&&(this.shoppingcartdata=t.data.data)})},updataCart(t){this.isLoading=!0,this.status.loadingItem=t.id;const e="https://vue3-course-api.hexschool.io/api/wuzong-api/cart/"+t.id,a={product_id:t.product_id,qty:t.qty};this.$http.put(e,{data:a}).then(t=>{console.log(t),t.data.success&&(this.getcardata(),this.isLoading=!1,this.status.loadingItem="")})}},mixins:[Y["a"]]},tt=(a("f283"),a("6b0d")),et=a.n(tt);const at=et()(Z,[["render",X]]);var st=at,ct={data(){return{productsdata:[],pagination:{},isLoading:!1,status:{loadingItem:""},cartdata:{}}},components:{Pagination:w["a"],shoppingcartModel:st},methods:{getproducts(t){this.isLoading=!0;const e="https://vue3-course-api.hexschool.io/api/wuzong-api/products?page="+t;this.$http.get(e).then(t=>{console.log(t),t.data.success&&(this.isLoading=!1,this.productsdata=t.data.products,this.pagination=t.data.pagination)})},getproduct(t){this.$router.push("/user/product/"+t)},attcart(t){const e={product_id:t,qty:1};this.status.loadingItem=t;const a="https://vue3-course-api.hexschool.io/api/wuzong-api/cart";this.$http.post(a,{data:e}).then(t=>{console.log(t),t.data.success&&(this.status.loadingItem="",console.log(t))})},OpenCartModel(){this.isLoading=!0;const t=this.$refs.shoppingcartModel,e="https://vue3-course-api.hexschool.io/api/wuzong-api/cart";this.$http.get(e).then(e=>{console.log(e),e.data.success&&(this.cartdata=e.data.data,this.isLoading=!1,t.showModel())})},closeCartModel(){const t=this.$refs.shoppingcartModel;t.hideModel()}},created(){this.getproducts()}};a("8209");const ot=et()(ct,[["render",C]]);e["default"]=ot},8209:function(t,e,a){"use strict";a("5e21")},adc5:function(t,e,a){},f283:function(t,e,a){"use strict";a("adc5")}}]);
//# sourceMappingURL=chunk-5ac489e9.89427d1b.js.map